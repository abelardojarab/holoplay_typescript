{"version":3,"file":"QuiltPlayer.js","sourceRoot":"","sources":["../QuiltPlayer.ts"],"names":[],"mappings":"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","sourcesContent":["class QuiltPlayer extends HoloplayApp {\r\n\r\n  private videoPlayer:HTMLVideoElement;\r\n  private btn;\r\n\r\n  public onPlay:Function = null;\r\n\r\n  constructor(){\r\n    super(null);\r\n\r\n\r\n    var btn = this.btn = document.createElement(\"input\");\r\n    btn.style.position = \"absolute\";\r\n    btn.style.top = btn.style.left = \"5px\";\r\n    btn.style.width = \"250px\"\r\n    btn.style.height = \"25px\";\r\n    btn.innerText = \"OPEN QUILT VIDEO FILE !\";\r\n    //btn.type = \"file\";\r\n    btn.setAttribute(\"type\",\"file\");\r\n    btn.setAttribute(\"accept\",\".mp4\");\r\n\r\n    document.body.appendChild(btn);\r\n\r\n    var videoPlayer = this.videoPlayer = document.createElement(\"video\");\r\n    videoPlayer.style.position = \"absolute\";\r\n    videoPlayer.style.top = \"50px\";\r\n    videoPlayer.style.width = \"600px\";\r\n    videoPlayer.style.height = \"600px\";\r\n    videoPlayer.loop = true;\r\n    videoPlayer.controls = true;\r\n\r\n\r\n    var th = this;\r\n    var quilt = {width:0,height:0,nbX:0,nbY:0};\r\n\r\n    videoPlayer.oncanplaythrough = function(){\r\n\r\n      th.init(quilt,HoloAppType.QUILT_PLAYER,videoPlayer);\r\n      th.addEventListener(\"click\",function(){th.getFullscreen()});\r\n      th.onReady = function(){\r\n        videoPlayer.play();\r\n        if(th.onPlay) th.onPlay();\r\n        th.onReady = null;\r\n      }\r\n      videoPlayer.oncanplaythrough = null;\r\n    }\r\n\r\n\r\n    btn.onchange = function(event) {\r\n\r\n\r\n      var name = (event.srcElement as any).files[0].name;\r\n      var t = name.split(\".\")[0].split(\"_\");\r\n      if(t.length != 5) throw new Error(\"Invalid video name\")\r\n\r\n      quilt.nbX = Number(t[1]);\r\n      quilt.nbY = Number(t[2]);\r\n      quilt.width = Number(t[3]);\r\n      quilt.height = Number(t[4]);\r\n\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL((event.srcElement as any).files[0]);\r\n      var me = this;\r\n      reader.onload = function () {\r\n        var fileContent = reader.result;\r\n    \t  //console.log(fileContent);\r\n        videoPlayer.src = fileContent;\r\n      }\r\n\r\n   }\r\n\r\n\r\n }\r\n\r\n}\r\n"]}